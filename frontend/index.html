<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Heart Disease Prediction Dashboard</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
    body {
        font-family: 'Inter', sans-serif;
        background: #f4f6f8;
        margin: 0;
        padding: 0;
    }

    .container {
        max-width: 1000px;
        margin: 40px auto;
        padding: 20px;
    }

    h1 {
        color: #1e3a8a;
        margin-bottom: 5px;
    }

    .subtitle {
        color: #555;
        margin-bottom: 30px;
    }

    .card {
        background: #fff;
        border-radius: 12px;
        padding: 25px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.08);
    }

    .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 15px;
    }

    label {
        font-size: 13px;
        color: #555;
        display: block;
        margin-bottom: 4px;
    }

    input {
        width: 100%;
        padding: 8px;
        border-radius: 8px;
        border: 1px solid #ccc;
        font-size: 14px;
    }

    input:focus {
        outline: none;
        border-color: #2563eb;
    }

    .buttons {
        display: flex;
        gap: 15px;
        margin-top: 20px;
    }

    button {
        flex: 1;
        padding: 12px;
        font-weight: 600;
        border-radius: 10px;
        border: none;
        cursor: pointer;
        font-size: 15px;
    }

    .btn-logistic {
        background: #2563eb;
        color: white;
    }

    .btn-tree {
        background: #16a34a;
        color: white;
    }
    
    .results {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-top: 30px;
    }

    .result-card {
        border-radius: 12px;
        padding: 20px;
        text-align: center;
        font-weight: 600;
        display: none;
    }

    .low {
        background: #dcfce7;
        color: #166534;
    }

    .high {
        background: #fee2e2;
        color: #991b1b;
    }

    .model-title {
        font-size: 14px;
        margin-bottom: 10px;
        opacity: 0.9;
    }

    .risk-text {
        font-size: 20px;
    }

    .footer {
        text-align: center;
        font-size: 12px;
        color: #777;
        margin-top: 20px;
    }
</style>
</head>

<body>

<div class="container">
    <h1>Heart Disease Risk Prediction</h1>
    <p class="subtitle">Machine Learning Model Comparison Dashboard</p>

    <div class="card">
        <div class="grid">
            <div><label>Age</label><input id="age" type="number" value="63"></div>
            <div><label>Sex (0=F,1=M)</label><input id="sex" type="number" value="1"></div>
            <div><label>Chest Pain</label><input id="cp" type="number" value="3"></div>
            <div><label>Blood Pressure</label><input id="trestbps" type="number" value="145"></div>
            <div><label>Cholesterol</label><input id="chol" type="number" value="233"></div>
            <div><label>FBS</label><input id="fbs" type="number" value="1"></div>
            <div><label>Rest ECG</label><input id="restecg" type="number" value="0"></div>
            <div><label>Max HR</label><input id="thalach" type="number" value="150"></div>
            <div><label>Exang</label><input id="exang" type="number" value="0"></div>
            <div><label>Oldpeak</label><input id="oldpeak" type="number" value="2.3" step="0.1"></div>
            <div><label>Slope</label><input id="slope" type="number" value="0"></div>
            <div><label>CA</label><input id="ca" type="number" value="0"></div>
            <div><label>Thal</label><input id="thal" type="number" value="1"></div>
        </div>

        <div class="buttons">
            <button class="btn-logistic" onclick="predictLogistic()">Predict (Logistic)</button>
            <button class="btn-tree" onclick="predictDecisionTree()">Predict (Decision Tree)</button>
        </div>
    </div>

    <div class="results">
        <div id="logisticCard" class="result-card">
            <div class="model-title">Logistic Regression</div>
            <div id="logisticText" class="risk-text"></div>
        </div>

        <div id="treeCard" class="result-card">
            <div class="model-title">Decision Tree</div>
            <div id="treeText" class="risk-text"></div>
        </div>
    </div>

    <div class="footer">
         Educational use only â€” not a medical diagnosis
    </div>
</div>

<script>
const backendURL = "https://ml-lab-backend.onrender.com";

function getFeatures() {
    const ids = ["age","sex","cp","trestbps","chol","fbs","restecg",
                 "thalach","exang","oldpeak","slope","ca","thal"];
    return ids.map(id => Number(document.getElementById(id).value));
}

function showResult(cardId, textId, hasDisease) {
    const card = document.getElementById(cardId);
    const text = document.getElementById(textId);

    card.classList.remove("low","high");
    card.classList.add(hasDisease ? "high" : "low");
    text.innerText = hasDisease ? "High Risk" : "Low Risk";
    card.style.display = "block";
}

async function predictLogistic() {
    const response = await fetch(`${backendURL}/predict/logistic`, {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({features: getFeatures()})
    });
    const data = await response.json();
    showResult("logisticCard", "logisticText", data.heart_disease);
}

async function predictDecisionTree() {
    const response = await fetch(`${backendURL}/predict/decision-tree`, {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({features: getFeatures()})
    });
    const data = await response.json();
    showResult("treeCard", "treeText", data.heart_disease);
}
</script>

</body>
</html>
